<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Hedera Mainnet Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  :root { --bg:#0a0e15; --card:#161b22; --accent:#00d4ff; }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { 
    background:var(--bg); 
    color:white; 
    font-family:system-ui,-apple-system,sans-serif; 
    overflow-x:hidden;
    width:100vw;
  }
  html {
    overflow-x:hidden;
  }
  .section {
    height:100vh;
    width:100%;
    position:relative;
    display:flex;
    align-items:center;
    justify-content:center;
    flex-direction:column;
  }
  #fixed-title {
    position:fixed;
    top:38%;
    left:50%;
    transform:translate(-50%,-50%);
    font-size:clamp(4rem,10vw,10rem);
    font-weight:900;
    z-index:100;
    pointer-events:none;
    background:linear-gradient(90deg,#00d4ff,#8b5cf6,#ff00aa);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    white-space:nowrap;
  }
  h2 {
    font-size:clamp(2.5rem,6vw,5rem);
    font-weight:900;
    margin-bottom:3rem;
    background:linear-gradient(90deg,#00d4ff,#8b5cf6);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    white-space:nowrap;
  }
  .cards-wrapper {
    width:100%;
    padding:6rem 0;
    overflow:hidden;
    position:relative;
  }
  .carousel {
    display:flex;
    gap:2.5rem;
    width:max-content;
    animation:scroll 60s linear infinite;
    padding:0 4rem;
    user-select:none;
    position:relative;
  }
  .carousel:hover { 
    animation-play-state:paused;
  }
  .carousel.dragging {
    animation:none;
    cursor:default;
  }
  @keyframes scroll {
    0%   { transform:translateX(0); }
    100% { transform:translateX(-50%); }
  }
  .card {
    flex:0 0 360px;
    height:210px;
    background:var(--card);
    border-radius:24px;
    padding:2.2rem;
    border:1px solid #30363d;
    backdrop-filter:blur(12px);
    box-shadow:0 30px 60px rgba(0,0,0,0.7);
    cursor:pointer;
    transition:transform 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
    display:flex;
    flex-direction:column;
    justify-content:center;
    will-change:transform;
  }
  .card:hover {
    transform:translateY(-30px) scale(1.06);
    box-shadow:0 60px 100px rgba(0,212,255,0.45);
    border-color:var(--accent);
  }
  .card-title { 
    font-size:0.9rem; 
    opacity:0.85; 
    margin-bottom:0.5rem;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .card-value { 
    font-size:2.5rem; 
    font-weight:800;
    background:linear-gradient(#00d4ff,#8b5cf6);
    -webkit-background-clip:text;
    -webkit-text-fill-color:transparent;
    white-space:nowrap;
    overflow:hidden;
    text-overflow:ellipsis;
  }
  .gradient-orb {
    position:absolute;
    width:1400px; height:1400px;
    border-radius:50%;
    filter:blur(150px);
    opacity:0;
    pointer-events:none;
  }
  .search-box {
    padding:1.5rem 2rem;
    width:90%;
    max-width:620px;
    border:2px solid #30363d;
    border-radius:18px;
    background:#161b22;
    color:white;
    font-size:1.3rem;
    text-align:center;
    margin-bottom:2rem;
    transition:all 0.3s ease;
  }
  .search-box:focus {
    outline:none;
    border-color:var(--accent);
    box-shadow:0 0 30px rgba(0,212,255,0.3);
  }
  .search-btn {
    padding:1.2rem 3rem;
    background:linear-gradient(90deg,#00d4ff,#8b5cf6);
    border:none;
    border-radius:12px;
    color:white;
    font-size:1.1rem;
    font-weight:700;
    cursor:pointer;
    margin-bottom:2rem;
    transition:all 0.3s ease;
  }
  .search-btn:hover {
    transform:scale(1.05);
    box-shadow:0 10px 40px rgba(0,212,255,0.5);
  }
  .loading {
    display:none;
    font-size:1.2rem;
    opacity:0.7;
    margin-bottom:1rem;
  }
  .loading.active { display:block; }
</style>
</head>
<body>
  <h1 id="fixed-title">HEDERA</h1>
  
  <section class="section" id="s1"></section>
  
  <section class="section" id="user">
    <div class="gradient-orb" style="top:-300px;left:-300px;background:radial-gradient(circle,rgba(139,92,246,0.18),transparent);"></div>
    <h2>USER DATA</h2>
    <input type="text" id="accountInput" class="search-box" placeholder="Enter account ID · 0.0.123456">
    <button class="search-btn" onclick="queryAccount()">Query Account</button>
    <div class="loading" id="accountLoading">Loading...</div>
    <div class="cards-wrapper">
      <div class="carousel" id="userCarousel">
        <div class="card"><div class="card-title">Balance</div><div class="card-value" id="balance">---</div></div>
        <div class="card"><div class="card-title">Account ID</div><div class="card-value" id="accountId">---</div></div>
        <div class="card"><div class="card-title">EVM Address</div><div class="card-value" id="evmAddr" style="font-size:1.2rem;">---</div></div>
        <div class="card"><div class="card-title">Created</div><div class="card-value" id="created" style="font-size:1.8rem;">---</div></div>
        <div class="card"><div class="card-title">Balance</div><div class="card-value" id="balance2">---</div></div>
        <div class="card"><div class="card-title">Account ID</div><div class="card-value" id="accountId2">---</div></div>
      </div>
    </div>
  </section>
  
  <section class="section" id="network">
    <div class="gradient-orb" style="background:radial-gradient(circle,rgba(0,212,255,0.45),rgba(139,92,246,0.3),transparent);"></div>
    <h2 style="opacity:0;transform:scale(0.8);">NETWORK STATS</h2>
    <div class="loading" id="networkLoading">Loading...</div>
    <div class="cards-wrapper">
      <div class="carousel" id="networkCarousel">
        <div class="card"><div class="card-title">HBAR Price</div><div class="card-value" id="hbarPrice">---</div></div>
        <div class="card"><div class="card-title">Total Value Locked</div><div class="card-value" id="tvl">---</div></div>
        <div class="card"><div class="card-title">Network TPS</div><div class="card-value" id="tps">---</div></div>
        <div class="card"><div class="card-title">Active Accounts</div><div class="card-value" id="activeAccounts">---</div></div>
        <div class="card"><div class="card-title">Total Accounts</div><div class="card-value" id="totalAccounts">---</div></div>
        <div class="card"><div class="card-title">24h Transactions</div><div class="card-value" id="transactions">---</div></div>
        <div class="card"><div class="card-title">HBAR Price</div><div class="card-value" id="hbarPrice2">---</div></div>
        <div class="card"><div class="card-title">Total Value Locked</div><div class="card-value" id="tvl2">---</div></div>
      </div>
    </div>
  </section>
  
  <section class="section" id="token">
    <div class="gradient-orb" style="bottom:-300px;right:-300px;background:radial-gradient(circle,rgba(255,0,170,0.2),transparent);"></div>
    <h2>RECENT TRANSACTIONS</h2>
    <button class="search-btn" onclick="queryTransactions()">Load Recent Transactions</button>
    <div class="loading" id="txLoading">Loading...</div>
    <div class="cards-wrapper">
      <div class="carousel" id="txCarousel">
        <div class="card"><div class="card-title">Loading</div><div class="card-value">---</div></div>
        <div class="card"><div class="card-title">Loading</div><div class="card-value">---</div></div>
        <div class="card"><div class="card-title">Loading</div><div class="card-value">---</div></div>
        <div class="card"><div class="card-title">Loading</div><div class="card-value">---</div></div>
        <div class="card"><div class="card-title">Loading</div><div class="card-value">---</div></div>
        <div class="card"><div class="card-title">Loading</div><div class="card-value">---</div></div>
      </div>
    </div>
  </section>
  
  <section class="section" id="final" style="background:#05070f;">
    <h2>THE FUTURE IS HEDERA</h2>
    <p style="font-size:1.5rem;opacity:0.7;margin-top:2rem;">Powered by Hgraph API</p>
  </section>

<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
<script>
const HGRAPH_API = 'https://mainnet.hedera.api.hgraph.io/v1/graphql';
const HGRAPH_KEY = 'pk_prod_138b03d98573dd8992cc9af61c748f56e329b09a';

// GSAP Animations
gsap.to("#fixed-title", {opacity:0, filter:"blur(30px)", scale:0.88, ease:"none",
  scrollTrigger: {trigger:"#s1", start:"top top", end:"bottom top", scrub:0.6}
});
gsap.to("#network h2", {opacity:1, scale:1, duration:2, ease:"power4.out",
  scrollTrigger: {trigger:"#network", start:"top 70%"}
});
gsap.to("#network .gradient-orb", {opacity:1, scale:1.4, duration:3,
  scrollTrigger: {trigger:"#network", start:"top 60%"}
});

// Auto-load network data when section comes into view
ScrollTrigger.create({
  trigger: "#network",
  start: "top 80%",
  once: true,
  onEnter: () => queryNetwork()
});

// Draggable Carousel Logic
function makeCarouselDraggable(carouselElement) {
  const wrapper = carouselElement.parentElement;
  let isDragging = false;
  let startX;
  let currentTranslate = 0;
  let prevTranslate = 0;
  let animationID;
  
  wrapper.addEventListener('mousedown', (e) => {
    isDragging = true;
    startX = e.clientX;
    carouselElement.classList.add('dragging');
    cancelAnimationFrame(animationID);
    
    // Get current transform value
    const style = window.getComputedStyle(carouselElement);
    const matrix = new DOMMatrix(style.transform);
    prevTranslate = matrix.m41;
  });
  
  wrapper.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    e.preventDefault();
    const currentX = e.clientX;
    const diff = currentX - startX;
    currentTranslate = prevTranslate + diff;
    carouselElement.style.transform = `translateX(${currentTranslate}px)`;
  });
  
  wrapper.addEventListener('mouseup', () => {
    isDragging = false;
    carouselElement.classList.remove('dragging');
    prevTranslate = currentTranslate;
  });
  
  wrapper.addEventListener('mouseleave', () => {
    if (isDragging) {
      isDragging = false;
      carouselElement.classList.remove('dragging');
      prevTranslate = currentTranslate;
    }
  });
  
  // Touch support for mobile
  wrapper.addEventListener('touchstart', (e) => {
    isDragging = true;
    startX = e.touches[0].clientX;
    carouselElement.classList.add('dragging');
    
    const style = window.getComputedStyle(carouselElement);
    const matrix = new DOMMatrix(style.transform);
    prevTranslate = matrix.m41;
  });
  
  wrapper.addEventListener('touchmove', (e) => {
    if (!isDragging) return;
    const currentX = e.touches[0].clientX;
    const diff = currentX - startX;
    currentTranslate = prevTranslate + diff;
    carouselElement.style.transform = `translateX(${currentTranslate}px)`;
  });
  
  wrapper.addEventListener('touchend', () => {
    isDragging = false;
    carouselElement.classList.remove('dragging');
    prevTranslate = currentTranslate;
  });
}

// Apply to all carousels
document.querySelectorAll('.carousel').forEach(makeCarouselDraggable);

// Query Account
async function queryAccount() {
  const accountInput = document.getElementById('accountInput').value;
  const accountNum = parseInt(accountInput.replace('0.0.', ''));
  
  if (!accountNum) {
    alert('Please enter a valid account ID (e.g., 0.0.123456)');
    return;
  }
  
  document.getElementById('accountLoading').classList.add('active');
  
  try {
    const response = await fetch(HGRAPH_API, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': HGRAPH_KEY
      },
      body: JSON.stringify({
        query: `
          query GetAccount($accountNum: bigint!) {
            entity(where: {num: {_eq: $accountNum}, type: {_eq: "ACCOUNT"}}, limit: 1) {
              num
              balance
              evm_address
              created_timestamp
            }
          }
        `,
        variables: { accountNum }
      })
    });
    
    const result = await response.json();
    
    if (result.data?.entity?.[0]) {
      const account = result.data.entity[0];
      const balance = (account.balance / 100000000).toFixed(2);
      const created = new Date(account.created_timestamp / 1000000).toLocaleDateString();
      const evmAddr = account.evm_address ? `0x${account.evm_address.slice(0, 8)}...` : 'N/A';
      
      document.getElementById('balance').textContent = `${balance} HBAR`;
      document.getElementById('balance2').textContent = `${balance} HBAR`;
      document.getElementById('accountId').textContent = `0.0.${account.num}`;
      document.getElementById('accountId2').textContent = `0.0.${account.num}`;
      document.getElementById('evmAddr').textContent = evmAddr;
      document.getElementById('created').textContent = created;
    } else {
      alert('Account not found');
    }
  } catch (error) {
    alert('Error: ' + error.message);
  } finally {
    document.getElementById('accountLoading').classList.remove('active');
  }
}

// Query Network Stats
async function queryNetwork() {
  document.getElementById('networkLoading').classList.add('active');
  
  try {
    const response = await fetch(HGRAPH_API, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': HGRAPH_KEY
      },
      body: JSON.stringify({
        query: `
          query GetNetworkStats {
            price: ecosystem_metric(
              where: {name: {_eq: "avg_usd_conversion"}, period: {_eq: "minute"}}
              order_by: [{end_date: desc_nulls_last}]
              limit: 1
            ) {
              total
            }
            tps: ecosystem_metric(
              where: {name: {_eq: "network_tps"}, period: {_eq: "hour"}}
              order_by: [{end_date: desc_nulls_last}]
              limit: 1
            ) {
              total
            }
            activeAccounts: ecosystem_metric(
              where: {name: {_eq: "active_accounts"}, period: {_eq: "day"}}
              order_by: [{end_date: desc_nulls_last}]
              limit: 1
            ) {
              total
            }
            totalAccounts: ecosystem_metric(
              where: {name: {_eq: "total_accounts"}, period: {_eq: "day"}}
              order_by: [{end_date: desc_nulls_last}]
              limit: 1
            ) {
              total
            }
            transactions: ecosystem_metric(
              where: {name: {_eq: "new_transactions"}, period: {_eq: "day"}}
              order_by: [{end_date: desc_nulls_last}]
              limit: 1
            ) {
              total
            }
          }
        `
      })
    });
    
    const result = await response.json();
    
    if (result.data) {
      const price = result.data.price?.[0] ? `$${(result.data.price[0].total / 100000).toFixed(5)}` : 'N/A';
      const tps = result.data.tps?.[0]?.total?.toLocaleString() || 'N/A';
      const active = result.data.activeAccounts?.[0]?.total?.toLocaleString() || 'N/A';
      const total = result.data.totalAccounts?.[0]?.total?.toLocaleString() || 'N/A';
      const txs = result.data.transactions?.[0]?.total?.toLocaleString() || 'N/A';
      
      document.getElementById('hbarPrice').textContent = price;
      document.getElementById('hbarPrice2').textContent = price;
      document.getElementById('tps').textContent = tps;
      document.getElementById('activeAccounts').textContent = active;
      document.getElementById('totalAccounts').textContent = total;
      document.getElementById('transactions').textContent = txs;
    }
  } catch (error) {
    alert('Error: ' + error.message);
  } finally {
    document.getElementById('networkLoading').classList.remove('active');
  }
}

// Query Recent Transactions
async function queryTransactions() {
  document.getElementById('txLoading').classList.add('active');
  
  try {
    const response = await fetch(HGRAPH_API, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': HGRAPH_KEY
      },
      body: JSON.stringify({
        query: `
          query GetRecentTransactions {
            transaction(
              order_by: [{consensus_timestamp: desc}]
              limit: 6
            ) {
              consensus_timestamp
              type
              payer_account_id
              charged_tx_fee
            }
          }
        `
      })
    });
    
    const result = await response.json();
    
    if (result.data?.transaction) {
      const carousel = document.getElementById('txCarousel');
      carousel.innerHTML = '';
      
      result.data.transaction.forEach(tx => {
        const fee = (tx.charged_tx_fee / 100000000).toFixed(4);
        const time = new Date(tx.consensus_timestamp / 1000000).toLocaleTimeString();
        
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="card-title">Type ${tx.type} • ${time}</div>
          <div class="card-value" style="font-size:1.8rem;">${fee} HBAR</div>
        `;
        carousel.appendChild(card);
      });
      
      // Duplicate for seamless scroll
      result.data.transaction.forEach(tx => {
        const fee = (tx.charged_tx_fee / 100000000).toFixed(4);
        const time = new Date(tx.consensus_timestamp / 1000000).toLocaleTimeString();
        
        const card = document.createElement('div');
        card.className = 'card';
        card.innerHTML = `
          <div class="card-title">Type ${tx.type} • ${time}</div>
          <div class="card-value" style="font-size:1.8rem;">${fee} HBAR</div>
        `;
        carousel.appendChild(card);
      });
    }
  } catch (error) {
    alert('Error: ' + error.message);
  } finally {
    document.getElementById('txLoading').classList.remove('active');
  }
}
</script>
</body>
</html>
